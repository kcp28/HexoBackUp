---
title: css之浮动
date: 2020-08-18 15:05:01
categories: 前端基础笔记
tags:
- css
---

- float   

  - 使用float来设置元素的浮动。浮动使元素向左或向右移动。float可选值：
    - none  默认，不浮动
    - left  向左浮动
    - right  向右浮动

- 浮动特点

  - 设置浮动以后，元素会向页面的左侧或右侧移动
  - 设置浮动以后，元素会完全脱离文档流，不再占据文档流中的位置。所以，它下边的元素会自动上移。
  - 浮动元素不会超过其上没有浮动的块元素。
  - 浮动元素的默认位置不会超过其上其他的浮动元素，最多在一行。

  <!--more-->

- 浮动后脱离文档流后，元素的特点

  1. 元素不会在文档流中占据位置。
  2. 块元素不会独占一行。
  3. 默认高度、宽度都被内容撑开。
  4. 内联元素浮动以后也脱离文档流，自动变成块元素，特点和块元素一样。

  *脱离文档流之后，就不用区分块元素和内联元素了。因为他们的默认宽高都是被内容撑开。*

- 文字不会被浮动元素遮挡，会环绕浮动元素。

  ```css
  <style type="text/css">
      .box1{
          width:100px;
          height: 100px;
          float: left;
          background-color: red;
      }
      .box2{
      	background-color: yellow;
      }
  </style>
  <body>
  	<div class="box1"></div>
  	<div class="box2">
  		<p>江户时代末期，被称为“天人”的异星人来袭。地球人与天人之间的战争瞬即爆发，为数众多的武士和攘夷派志士都参与与天人的战斗。幕府见识到天人强大的实力后，擅自与天人签订不平等条约，准许他们入国。其后更颁布了“废刀令”，夺走了武士的刀。自此，天人横行霸道，幕府成为了“傀儡政权”。在这样的时代，有一个武士与同伴愉快地过着异想天开的生活。</p>
  	</div>
  </body>
  ```

  效果：{% asset_img 文字与浮动.png float example %}

  *我们可以利用浮动来实现一个文字环绕图片的效果。*

- 浮动的问题——高度塌陷

  块元素的高度默认情况下是被子元素撑开的。如果子元素浮动，将会完全脱离文档流，脱离文档流子元素无法撑起父元素高度，将会导致父元素高度丢失。一旦父元素高度丢失，页面中其他元素的位置也会随之改变，导致布局的混乱。

  - 解决：BFC（Block Format Context）

- BFC

  BFC是块级格式化环境。它是元素的一个隐藏属性。一旦元素开启了BFC，它将会开启一个独立的布局区域。这个布局区域将有一些特殊的性质：

  1. 开启了BFC的元素，子元素的垂直外边距不会传递给父元素。
  2. 开启了BFC的元素，不会被浮动的元素所覆盖
  3. 开启了BFC的元素，可以包含浮动的子元素。

- 开启BFC的方法

  1. 设置元素浮动可以开启BFC 。父元素高度不会丢失，但宽度将等于子元素的宽度，并会改变页面布局。
  2. 将元素设置为行内块元素   display:inline-block;  父元素高度不丢失，宽度等于子元素，但不会改变页面布局。
  3. 将元素的overflow设置为非visible的值。（目前最完美的方式）visible:auto/hidden；（overflow详见{% post_link css之盒子模型等 css之盒子模型、边框、内外边距 %}）

  *总结：可以通过overflow:hidden来开启元素的BFC，从而解决子元素浮动父元素高度塌陷的问题。（谁塌，谁的overflow设置为hidden）*

  4. 用clear属性清除浮动。（目前最完美的方式）

- clear

  clear 用来清除浮动元素对当前元素的影响（谁不想被浮动影响谁加clear）。可选值：

  - none  默认值  不清除浮动的影响
  - left  清除左侧浮动元素对当前元素的影响
  - right  清除右侧浮动元素对当前元素的影响
  - both 清除两侧浮动对当前元素影响最大的浮动影响。

  原理：设置clear时，浏览器自动为该元素添加一个外边距。

- 设置clearfix类，同时解决垂直外边距传递和高度塌陷问题：

  - 用伪类解决父子元素相邻垂直外边距传递

  ```css
  .clearfix::before{
      content:'';
      display:table;
  }
  ```

  - 用伪类解决子元素浮动，父元素高度塌陷问题

  ```css
  .clearfix::after{
      content:'';
      display:block;/*伪元素默认为行内元素，要设置成块元素才行*/
      clear:both;/*清除浮动*/
  }
  ```

  - 将以上两个写在一起，使该类能同时解决垂直外边距传递和高度塌陷问题。

  ```css
  .clearfix::before,.clearfix::after{
      content:'';
      display:table;/*只有display为table时可以解决外边距的问题，而table形式也可解决高度塌陷的问题，所以这里display设置为table*/
      clear:both;
  }
  ```

  谁塌谁加clearfix类；谁被传递了垂直外边距谁加clearfix类。（一般都是父元素。）

